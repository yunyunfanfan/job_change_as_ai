<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=bar-simple&code=1VhbUxvJFX6niv_QZddGYrGFxEUGbJySkJSQsjfOmtQ-ED8M0kiarKRRZkYBvKEK1sECbCycYBt77XBZYlg7gPESA7KR_4xmRnryX8jp7rn06GJsbyqVVRVoNH3O1-d-TndHB_J5kHbvhbawo-Zvqhv51paomJEVJHFjIU7h0AAaaW1B6BskiSm-H7l-m1NkMSdFhUzCdQZFxVxG6Uc9Xb1o8oyDLiKJGYXPxJBbnVvQn--22dTdfn8t9RVJjOWiCrqckBi6bl8t3e-HOkK8LCQyNlVXb1ctVZCLfk23Xrzj3Lqrp6-WOJBKiJKgJNMdgSGG0Fun0e8CHcO8rNg05-o2_k0uI4hSxxBoLjEinvOiydaWa-dbW1pbwOKdHlRdf1yZe1mdWdCPd0DMg5fa6hG4oPJ0Wtv7Vpu7pc5vqfOr2sHeuze3y2-faLen1Tsr2uM5YKq8uFE-vql9t68tl-BnG4GEVXhGZy8iyoYVf_RXuovp0aiYEiXZdKjrdJ8_6A_5QErKj04HwoOBcKeBQGkCXYM9oSBDE4yE-sIBB82gd9AXCjA0oWBoMBx20IS6Q71hFiccCkciQYMGufWtBbW0ox4-1adfVP7-hGpd2Z1WC7uVzWm1-BTUxDjhYMgpc2QQkJzyhEGeICtPpBsk8jtpugKRvm6W5txgX9CpeyjYF-7rdCFb5nCwN2DrZflTKyyqhfs0iUxjjxvJY6SRJ81l3YLCp9HARYS_PThi2gCBkk-cRE4iCdOTHbs8qFKaUed_UPPHsO-7N48gKrR7-9Th5eIOWOzdm1l9aatcvKMvrWizi12hcmmz-mRd_dvt6toreKgu76vHEF9zrS3xXCaqCGIGcbE_5mRlEAeKm4TLGcSlyc7oG2wUhFK8gnIyfwVexkDeOJeSeZAKLwlxRJlGvNfQwAA6dfqUxYY_ZA14yLdHTglR3u3DKpkEDK4i5UxYyBxz40wODIKynCTzkGKmhD6_CYJp8A5uTHjxIl5B7YYGjJASuog6e3raCC08nEc8aGEsXUBeuuBlQEcxqIna24Z-gbzjXm8k0hB-1ITHXE74UQqPF1j4hCkzxW2KnDCRMYMTOUGR8YKJLPFKTsogt2XWX2KXoH50CvzSjln-QiS6gDWCR9D9AjZZm0cRryoSFHg3NS14gERdtweFB5OcpMiIVq7q2lFri5gloTNAXT0KpTch4e1IFEFNPB2PxyHR8CLOldV8dX1Z3ZspH27jV4qg4MpphInCj0O5dF0WISVCghzNyTIfQ0PD6EvIFtlFii02WRxTRXlcZo0ctgABRMz2I5_XIMaQV5UJZhOE4tCaIlxaSE0AzLCQ5mX0BT8Gm6Q5qNos1VXhOjB2djtefsULiSSWYFRMxWx6Eo5YYXCgCwulF3err-8yUUy7BRb3u1K5dAun7do_1ZkZ9fGWWvixfDiv3QeDYgUT0L4sgWNQEfrRiOsyKIxNHZH4P-X4THTCdc1UEqvcZaosUfE6vcQ02lLJwC9t_lSTOFRsYChfZ522iiimFAHEM10M0iV4DMKNC5ZL8fMVUcAOBUqkTGRxO5WTXEwccxlITsHfL3GNvWl11I_vaqtvKqWjygHuMNXll9r2evnwFlhdu59Xtx9U1p-rs3ntPgmkhCTYLjBCrvczU2DDxq4e682oqChiGkcetbtavFe9saXfe6jmi5VXP6obK_oPxeqDff31Q21hvbJ2Gxo0ZIO-XYKSXFnbUjf2GWf2ms6E_qBwQuYSN8qn-mm9tVUbD4DdbNNSq0U5hYeRZsIUjIYPaUjGmwyXxoR2XhEbMSJggksiAEG41WQaDSdINlDFJv4VBzL39FCggyf609eV4329-BZ0pD-xvaffqjMLoCzVuppfUAurNsRwg6j80Lh0xKC_5nWTdD0pYZnIvCRkWKnkpDjWT1qUBSZPpAEdJ2lGzPBgKRcnSRC6ZoJCBAFGvXrOhCLWo3ZjJMGfMSGmJEE3T4_5zmiLrJjDQvRrnBlUPhIqTjVoDFnbk3T7MwevjIh9U1RnX8FYqW8UtbkpGDeppz61bPo6mxQOoxEAtFNPbKNfG95i3BgXpTSnkNJgTSpukDvHO-YL2l9IalWnXldKd6G-aruFnvLhM8ht_V9Ptdn71em8OvtCnztSdx7BG7VwQBkgPPW1HZg5y4cLbGAacuG5Av5gpjl1nnQydiXNjV_iMwklCev-80SI3QJgao-n1I1NY-t7L2rZQAGLjSjjSZGfzEBk7CyOfQE0lzkl6YnyQgqrbnB22Juzg5Qx5mA-GIJqjGRYFLkxtkDmBfi6QLaBp_b2BvSmKDCJZqkVmlHICswHQCKgz23ZmlLjQ9qAwdN-Ar2xNzWVnBuV6YhCmM9gJDzUnPpDprFs2H3tMFcCiNODTC45qPHoBF8OsEk6b9WZxyAnojkZarPVLt0TjUo3QTBTCWfk7Gr14Ua5eBNmorrmj6C4ksoJ088_tKlNq8Tqz6bVmSn4qS4-Lx_N6Ut7dN6obH5fzc__rMqanE0JyslyNpbCMGqMk5N848IfjUZd7ymotQXzE4akxqWOiQOZlwQeAoEcyonT4UKmOlXQlu9oK3vq9iI9xBlVmanHllRGN68PEEsiwxCjHPRw8x2dCsi503oHBF9Rj1izJELXmWEaCgtkUHN_KxKXkeF8BqLYdrW9VGPOhq5EKCvKgjF4wChU2-Q_chiwJ3fGMX6_32hCB3v4wmHuJSSLtrtEXaStLMGQ8oEzhBiPyzwsjEALPdtzjUwR9C5j8S4e6AuL5cMp_Vsy1jeIMnobVMk_g34EqYq6Qgi8rs-_goytcbM53cEBXUzbIjT3Pikgu0dqcYmmv7q4oG9abQh8FOOlIXAn21XBd1xahlN_Vqg5u-NbipQxEkIZBgK4kxClmHsEP5LC5fa2EU7jl6_tGtuUKMR1XhLfx-5twJPkUnESl8Do62XLt_2ES8ydA7iGaXT_5YQb5WSeHE7Nuwh5hKrtwTkxBGYZR58ZK0ZPxlc9jffcWdN3Hqgzc3CVUrsbLNMrF_eXOHja1MKy9ugBcp_t9pLbLFYmcpwwhWJvYSxhIbyAj1Ue8OlNjntYzGJ0uPdB7vauenRIowgXtZRugg-MjJo4O7a_x-jkJrdNO4RLrmUYqei5BkYlfLRZKdLkwYLc2KI0eMB6eAzvO7R_zzgsYj8ZHdPRSY0Ax7cHjqwHLZJCKgYBa1XJOiGdr-satAEt8VG4vq1dhFMmXm0w9Iz3WyGP77TO2pFYBwINnSH22Q3S_hjNzo7mz5E9INufpFFqcKYAEOzKwNZNLvXa1BVnq44JKWf1bWAh3EjZLlFnDyhzoCj8H--kP-DL14ScpNBVCD7c3prsy9ZQgDNKtJ2ijbkmzzTTg8XzWXj0Eso-ldNAhShtAl9n5wYzYs2LWk9Y2f9hoZkVUxMJ0dHFTorOLL4vsScH52eEDdx2JnDZaGoUpe9jNULy49jgGeYHJpx93k8CYOSmIPUY_4X0sAvxx_ubVuP_A3-zheqn-PuTWZu57GQQRvT_qd_ZFnmS59mfzNaTVve0t2embGbyB6bJ8_8B&enc=deflate
	⚠ 请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://echarts.apache.org/zh/js/vendors/echarts-gl/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://echarts.apache.org/zh/js/vendors/echarts-stat/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-graph-modularity extension
  <script type="text/javascript" src="https://echarts.apache.org/zh/js/vendors/echarts-graph-modularity/dist/echarts-graph-modularity.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    // 1. 数据准备
const rawData = [
  { role: 'Outsourcing', count: 538 },
  { role: 'Frontend (前端)', count: 466 },
  { role: 'Product Mgr', count: 441 },
  { role: 'UI/Design', count: 383 },
  { role: 'Backend (后端)', count: 359 },
  { role: 'Algorithm/AI', count: 308 },
  { role: 'QA/Test', count: 73 },
  { role: 'Junior/Intern', count: 70 }
];

// 2. 颜色配置 (已根据要求手动加深，保持原有色调但更显色)
// 原色 -> 加深后的颜色
const colors = [
  '#96B6D1', // 原 #AECAE2 加深
  '#A3C5DB', // 原 #BFD9EA 加深
  '#C0C1DA', // 原 #DBDCEE 加深
  '#D4D8EB', // 原 #EDEFFB 加深 (稍微带灰蓝，保证可见度)
  '#EBD6D1', // 原 #FCEDEA 加深
  '#E0C1BA', // 原 #F4DBD6 加深
  '#E3AF94', // 原 #F7C9B2 加深
  '#DB9E92'  // 原 #EEB8AE 加深
];

// 提取数据
const xData = rawData.map(item => item.role);
const yData = rawData.map(item => item.count);

// 3. 辅助函数：调整颜色亮度（用于生成3D侧面和顶面阴影）
function adjustColor(color, amount) {
    let usePound = false;
    if (color[0] == "#") {
        color = color.slice(1);
        usePound = true;
    }
    let num = parseInt(color, 16);
    let r = (num >> 16) + amount;
    if (r > 255) r = 255; else if (r < 0) r = 0;
    let b = ((num >> 8) & 0x00FF) + amount;
    if (b > 255) b = 255; else if (b < 0) b = 0;
    let g = (num & 0x0000FF) + amount;
    if (g > 255) g = 255; else if (g < 0) g = 0;
    return (usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16);
}

// 4. ECharts 配置项
option = {
  backgroundColor: '#fff', 
  // 标题居中
  title: {
    text: 'Most Discussed IT Roles',
    left: 'center', // 居中
    top: 10,
    textStyle: {
      fontFamily: 'Times New Roman',
      fontSize: 24,
      fontWeight: 'bold',
      color: '#000' // 纯黑
    }
  },
  // 图例：补充在右上方
  legend: {
    data: ['Mention Frequency'],
    top: 30,
    right: 20, // 放在右侧
    textStyle: {
      fontFamily: 'Times New Roman',
      color: '#000',
      fontSize: 12
    }
  },
  tooltip: {
    trigger: 'axis',
    axisPointer: { type: 'shadow' },
    textStyle: { fontFamily: 'Times New Roman' }
  },
  // 调整网格边距，防止下方文字被切断
  grid: {
    left: '8%',
    right: '5%',
    bottom: 100, // 底部留出足够空间给换行的标签和表头
    top: 80,
    containLabel: false
  },
  xAxis: {
    type: 'category',
    data: xData,
    name: 'IT Roles', // 表头
    nameLocation: 'center', // 放在中间
    nameGap: 55, // 距离轴线的距离，避免和标签重叠
    nameTextStyle: {
        fontFamily: 'Times New Roman',
        fontSize: 16,
        fontWeight: 'bold',
        color: '#000' // 纯黑
    },
    axisLine: {
      show: true,
      symbol: ['none', 'arrow'],
      lineStyle: {
        color: '#000', // 轴线纯黑
        width: 1.5
      }
    },
    axisTick: { show: false },
    axisLabel: {
      interval: 0, // 强制显示所有标签
      fontFamily: 'Times New Roman',
      fontSize: 12,
      color: '#000', // 标签纯黑
      lineHeight: 16,
      formatter: function (value) {
          // 换行逻辑：每5个字符或遇到特定符号换行，确保不重叠
          let ret = ""; 
          let maxLength = 6; // 每行最大字符数
          let valLength = value.length;
          let rowN = Math.ceil(valLength / maxLength);
          if (rowN > 1) {
              for (let i = 0; i < rowN; i++) {
                  let temp = "";
                  let start = i * maxLength;
                  let end = start + maxLength;
                  temp = value.substring(start, end) + "\n";
                  ret += temp; 
              }
              return ret;
          } else {
              return value;
          }
      }
    }
  },
  yAxis: {
    type: 'value',
    // 删除了 'Mention Frequency' 的 name 属性，避免突兀，含义由图例解释
    axisLine: {
      show: true,
      symbol: ['none', 'arrow'],
      lineStyle: {
        color: '#000', // 轴线纯黑
        width: 1.5
      }
    },
    splitLine: {
      show: true,
      lineStyle: {
        type: 'dashed',
        color: '#ccc'
      }
    },
    axisLabel: {
      fontFamily: 'Times New Roman',
      color: '#000' // 标签纯黑
    }
  },
  series: [
    // 1. 透明柱子用于显示标签
    {
      name: 'Mention Frequency',
      type: 'bar',
      data: yData,
      barWidth: 30,
      z: 10,
      itemStyle: {
        color: 'transparent'
      },
      label: {
        show: true,
        position: 'top',
        fontFamily: 'Times New Roman',
        fontSize: 14,
        color: '#666', // 深灰色，比纯黑柔和
        fontWeight: 'bold',
        offset: [0, -5] // 稍微向上提一点
      }
    },
    // 2. 自定义 3D 柱状图
    {
      type: 'custom',
      name: 'Mention Frequency', // 对应图例名称
      renderItem: function (params, api) {
        const location = api.coord([api.value(0), api.value(1)]);
        const zero = api.coord([api.value(0), 0]);
        const halfWidth = 18; 
        
        // 获取加深后的颜色
        const baseColor = colors[params.dataIndex % colors.length];
        
        // 计算光影颜色
        // 侧面(Right)变暗 (-40)
        const rightColor = adjustColor(baseColor, -40); 
        // 顶面(Top)变亮 (+30)
        const topFaceColor = adjustColor(baseColor, 30);
        // 正面(Front)渐变：底部保留基色，顶部渐变到白色/浅色
        
        return {
          type: 'group',
          children: [
            // 正面
            {
              type: 'rect',
              shape: {
                x: location[0] - halfWidth,
                y: location[1],
                width: halfWidth * 2,
                height: zero[1] - location[1]
              },
              style: {
                fill: {
                    type: 'linear',
                    x: 0, y: 0, x2: 0, y2: 1,
                    colorStops: [{
                        offset: 0, color: baseColor 
                    }, {
                        offset: 1, color: '#fff' // 底部渐变白
                    }]
                }
              }
            },
            // 侧面
            {
              type: 'polygon',
              shape: {
                points: [
                  [location[0] + halfWidth, location[1]],
                  [location[0] + halfWidth, zero[1]],
                  [location[0] + halfWidth + 10, zero[1] - 10],
                  [location[0] + halfWidth + 10, location[1] - 10]
                ]
              },
              style: {
                fill: rightColor
              }
            },
            // 顶面
            {
              type: 'polygon',
              shape: {
                points: [
                  [location[0] - halfWidth, location[1]],
                  [location[0] + halfWidth, location[1]],
                  [location[0] + halfWidth + 10, location[1] - 10],
                  [location[0] - halfWidth + 10, location[1] - 10]
                ]
              },
              style: {
                fill: topFaceColor
              }
            }
          ]
        };
      },
      data: yData
    }
  ]
};

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>